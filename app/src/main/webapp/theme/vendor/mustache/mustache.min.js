!function(b,c){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?c(exports):"function"==typeof define&&define.amd?define(["exports"],c):(b.Mustache={},c(b.Mustache))}(this,function(b){function e(a){return"function"==typeof a}function f(a){return d(a)?"array":typeof a}function g(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(a,b){return null!=a&&"object"==typeof a&&b in a}function j(a,b){return i.call(a,b)}function l(a){return!j(k,a)}function n(a){return String(a).replace(/[&<>"'`=\/]/g,function(b){return m[b]})}function t(a,c){function k(){if(i&&!j)for(;h.length;)delete f[h.pop()];else h=[];i=!1,j=!1}function x(a){if("string"==typeof a&&(a=a.split(p,2)),!d(a)||2!==a.length)throw new Error("Invalid tags: "+a);m=new RegExp(g(a[0])+"\\s*"),n=new RegExp("\\s*"+g(a[1])),t=new RegExp("\\s*"+g("}"+a[1]))}if(!a)return[];var m,n,t,e=[],f=[],h=[],i=!1,j=!1;x(c||b.tags);for(var z,A,B,C,D,E,y=new w(a);!y.eos();){if(z=y.pos,B=y.scanUntil(m))for(var F=0,G=B.length;F<G;++F)C=B.charAt(F),l(C)?h.push(f.length):j=!0,f.push(["text",C,z,z+1]),z+=1,"\n"===C&&k();if(!y.scan(m))break;if(i=!0,A=y.scan(s)||"name",y.scan(o),"="===A?(B=y.scanUntil(q),y.scan(q),y.scanUntil(n)):"{"===A?(B=y.scanUntil(t),y.scan(r),y.scanUntil(n),A="&"):B=y.scanUntil(n),!y.scan(n))throw new Error("Unclosed tag at "+y.pos);if(D=[A,B,z,y.pos],f.push(D),"#"===A||"^"===A)e.push(D);else if("/"===A){if(E=e.pop(),!E)throw new Error('Unopened section "'+B+'" at '+z);if(E[1]!==B)throw new Error('Unclosed section "'+E[1]+'" at '+z)}else"name"===A||"{"===A||"&"===A?j=!0:"="===A&&x(B)}if(E=e.pop())throw new Error('Unclosed section "'+E[1]+'" at '+y.pos);return v(u(f))}function u(a){for(var c,d,b=[],e=0,f=a.length;e<f;++e)c=a[e],c&&("text"===c[0]&&d&&"text"===d[0]?(d[1]+=c[1],d[3]=c[3]):(b.push(c),d=c));return b}function v(a){for(var e,f,b=[],c=b,d=[],g=0,h=a.length;g<h;++g)switch(e=a[g],e[0]){case"#":case"^":c.push(e),d.push(e),c=e[4]=[];break;case"/":f=d.pop(),f[5]=e[2],c=d.length>0?d[d.length-1][4]:b;break;default:c.push(e)}return b}function w(a){this.string=a,this.tail=a,this.pos=0}function x(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function y(){this.cache={}}var c=Object.prototype.toString,d=Array.isArray||function(b){return"[object Array]"===c.call(b)},i=RegExp.prototype.test,k=/\S/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},o=/\s*/,p=/\s+/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/;w.prototype.eos=function(){return""===this.tail},w.prototype.scan=function(b){var c=this.tail.match(b);if(!c||0!==c.index)return"";var d=c[0];return this.tail=this.tail.substring(d.length),this.pos+=d.length,d},w.prototype.scanUntil=function(b){var d,c=this.tail.search(b);switch(c){case-1:d=this.tail,this.tail="";break;case 0:d="";break;default:d=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=d.length,d},x.prototype.push=function(b){return new x(b,this)},x.prototype.lookup=function(b){var d,c=this.cache;if(c.hasOwnProperty(b))d=c[b];else{for(var g,i,f=this,j=!1;f;){if(b.indexOf(".")>0)for(d=f.view,g=b.split("."),i=0;null!=d&&i<g.length;)i===g.length-1&&(j=h(d,g[i])),d=d[g[i++]];else d=f.view[b],j=h(f.view,b);if(j)break;f=f.parent}c[b]=d}return e(d)&&(d=d.call(this.view)),d},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(b,c){var d=this.cache,e=d[b];return null==e&&(e=d[b]=t(b,c)),e},y.prototype.render=function(b,c,d){var e=this.parse(b),f=c instanceof x?c:new x(c);return this.renderTokens(e,f,d,b)},y.prototype.renderTokens=function(b,c,d,e){for(var g,h,i,f="",j=0,k=b.length;j<k;++j)i=void 0,g=b[j],h=g[0],"#"===h?i=this.renderSection(g,c,d,e):"^"===h?i=this.renderInverted(g,c,d,e):">"===h?i=this.renderPartial(g,c,d,e):"&"===h?i=this.unescapedValue(g,c):"name"===h?i=this.escapedValue(g,c):"text"===h&&(i=this.rawValue(g)),void 0!==i&&(f+=i);return f},y.prototype.renderSection=function(b,c,f,g){function k(a){return h.render(a,c,f)}var h=this,i="",j=c.lookup(b[1]);if(j){if(d(j))for(var l=0,m=j.length;l<m;++l)i+=this.renderTokens(b[4],c.push(j[l]),f,g);else if("object"==typeof j||"string"==typeof j||"number"==typeof j)i+=this.renderTokens(b[4],c.push(j),f,g);else if(e(j)){if("string"!=typeof g)throw new Error("Cannot use higher-order sections without the original template");j=j.call(c.view,g.slice(b[3],b[5]),k),null!=j&&(i+=j)}else i+=this.renderTokens(b[4],c,f,g);return i}},y.prototype.renderInverted=function(b,c,e,f){var g=c.lookup(b[1]);if(!g||d(g)&&0===g.length)return this.renderTokens(b[4],c,e,f)},y.prototype.renderPartial=function(b,c,d){if(d){var f=e(d)?d(b[1]):d[b[1]];return null!=f?this.renderTokens(this.parse(f),c,d,f):void 0}},y.prototype.unescapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return d},y.prototype.escapedValue=function(c,d){var e=d.lookup(c[1]);if(null!=e)return b.escape(e)},y.prototype.rawValue=function(b){return b[1]},b.name="mustache.js",b.version="2.3.0",b.tags=["{{","}}"];var z=new y;return b.clearCache=function(){return z.clearCache()},b.parse=function(b,c){return z.parse(b,c)},b.render=function(b,c,d){if("string"!=typeof b)throw new TypeError('Invalid template! Template should be a "string" but "'+f(b)+'" was given as the first argument for mustache#render(template, view, partials)');return z.render(b,c,d)},b.to_html=function(c,d,f,g){var h=b.render(c,d,f);return e(g)?void g(h):h},b.escape=n,b.Scanner=w,b.Context=x,b.Writer=y,b});