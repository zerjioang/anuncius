!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery||a.Zepto)}(this,function(a,b){"use strict";function n(a){if(j&&"none"===a.css("animation-name")&&"none"===a.css("-webkit-animation-name")&&"none"===a.css("-moz-animation-name")&&"none"===a.css("-o-animation-name")&&"none"===a.css("-ms-animation-name"))return 0;var e,f,g,h,b=a.css("animation-duration")||a.css("-webkit-animation-duration")||a.css("-moz-animation-duration")||a.css("-o-animation-duration")||a.css("-ms-animation-duration")||"0s",c=a.css("animation-delay")||a.css("-webkit-animation-delay")||a.css("-moz-animation-delay")||a.css("-o-animation-delay")||a.css("-ms-animation-delay")||"0s",d=a.css("animation-iteration-count")||a.css("-webkit-animation-iteration-count")||a.css("-moz-animation-iteration-count")||a.css("-o-animation-iteration-count")||a.css("-ms-animation-iteration-count")||"1";for(b=b.split(", "),c=c.split(", "),d=d.split(", "),h=0,f=b.length,e=Number.NEGATIVE_INFINITY;h<f;h++)g=parseFloat(b[h])*parseInt(d[h],10)+parseFloat(c[h]),g>e&&(e=g);return e}function o(){if(b(document.body).height()<=b(window).height())return 0;var d,e,a=document.createElement("div"),c=document.createElement("div");return a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a),d=a.offsetWidth,a.style.overflow="scroll",c.style.width="100%",a.appendChild(c),e=c.offsetWidth,a.parentNode.removeChild(a),d-e}function p(){if(!k){var d,e,a=b("html"),c=v("is-locked");a.hasClass(c)||(e=b(document.body),d=parseInt(e.css("padding-right"),10)+o(),e.css("padding-right",d+"px"),a.addClass(c))}}function q(){if(!k){var d,e,a=b("html"),c=v("is-locked");a.hasClass(c)&&(e=b(document.body),d=parseInt(e.css("padding-right"),10)-o(),e.css("padding-right",d+"px"),a.removeClass(c))}}function r(a,b,c,d){var e=v("is",b),f=[v("is",h.CLOSING),v("is",h.OPENING),v("is",h.CLOSED),v("is",h.OPENED)].join(" ");a.$bg.removeClass(f).addClass(e),a.$overlay.removeClass(f).addClass(e),a.$wrapper.removeClass(f).addClass(e),a.$modal.removeClass(f).addClass(e),a.state=b,!c&&a.$modal.trigger({type:b,reason:d},[{reason:d}])}function s(a,c,d){var g=0,h=function(a){a.target===this&&g++},i=function(a){a.target===this&&0===--g&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){d[b].off(e+" "+f)}),c())};b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){d[b].on(e,h).on(f,i)}),a(),0===n(d.$bg)&&0===n(d.$overlay)&&0===n(d.$wrapper)&&0===n(d.$modal)&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){d[b].off(e+" "+f)}),c())}function t(a){a.state!==h.CLOSED&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(b,c){a[c].off(e+" "+f)}),a.$bg.removeClass(a.settings.modifier),a.$overlay.removeClass(a.settings.modifier).hide(),a.$wrapper.hide(),q(),r(a,h.CLOSED,!0))}function u(a){var c,d,e,f,b={};for(a=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),c=a.split(","),f=0,d=c.length;f<d;f++)c[f]=c[f].split(":"),e=c[f][1],("string"==typeof e||e instanceof String)&&(e="true"===e||"false"!==e&&e),("string"==typeof e||e instanceof String)&&(e=isNaN(e)?e:+e),b[c[f][0]]=e;return b}function v(){for(var a=d,b=0;b<arguments.length;++b)a+="-"+arguments[b];return a}function w(){var d,e,a=location.hash.replace("#","");if(a){try{e=b('[data-remodal-id="'+a+'"]')}catch(a){}e&&e.length&&(d=b[c].lookup[e.data(c)],d&&d.settings.hashTracking&&d.open())}else l&&l.state===h.OPENED&&l.settings.hashTracking&&l.close()}function x(a,e){var f=b(document.body),j=f,k=this;k.settings=b.extend({},g,e),k.index=b[c].lookup.push(k)-1,k.state=h.CLOSED,k.$overlay=b("."+v("overlay")),null!==k.settings.appendTo&&k.settings.appendTo.length&&(j=b(k.settings.appendTo)),k.$overlay.length||(k.$overlay=b("<div>").addClass(v("overlay")+" "+v("is",h.CLOSED)).hide(),j.append(k.$overlay)),k.$bg=b("."+v("bg")).addClass(v("is",h.CLOSED)),k.$modal=a.addClass(d+" "+v("is-initialized")+" "+k.settings.modifier+" "+v("is",h.CLOSED)).attr("tabindex","-1"),k.$wrapper=b("<div>").addClass(v("wrapper")+" "+k.settings.modifier+" "+v("is",h.CLOSED)).hide().append(k.$modal),j.append(k.$wrapper),k.$wrapper.on("click."+d,'[data-remodal-action="close"]',function(a){a.preventDefault(),k.close()}),k.$wrapper.on("click."+d,'[data-remodal-action="cancel"]',function(a){a.preventDefault(),k.$modal.trigger(i.CANCELLATION),k.settings.closeOnCancel&&k.close(i.CANCELLATION)}),k.$wrapper.on("click."+d,'[data-remodal-action="confirm"]',function(a){a.preventDefault(),k.$modal.trigger(i.CONFIRMATION),k.settings.closeOnConfirm&&k.close(i.CONFIRMATION)}),k.$wrapper.on("click."+d,function(a){var c=b(a.target);c.hasClass(v("wrapper"))&&k.settings.closeOnOutsideClick&&k.close()})}var l,m,c="remodal",d=a.REMODAL_GLOBALS&&a.REMODAL_GLOBALS.NAMESPACE||c,e=b.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(a){return a+"."+d}).join(" "),f=b.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(a){return a+"."+d}).join(" "),g=b.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},a.REMODAL_GLOBALS&&a.REMODAL_GLOBALS.DEFAULTS),h={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},i={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},j=function(){var a=document.createElement("div").style;return void 0!==a.animationName||void 0!==a.WebkitAnimationName||void 0!==a.MozAnimationName||void 0!==a.msAnimationName||void 0!==a.OAnimationName}(),k=/iPad|iPhone|iPod/.test(navigator.platform);x.prototype.open=function(){var d,a=this;a.state!==h.OPENING&&a.state!==h.CLOSING&&(d=a.$modal.attr("data-remodal-id"),d&&a.settings.hashTracking&&(m=b(window).scrollTop(),location.hash=d),l&&l!==a&&t(l),l=a,p(),a.$bg.addClass(a.settings.modifier),a.$overlay.addClass(a.settings.modifier).show(),a.$wrapper.show().scrollTop(0),a.$modal.focus(),s(function(){r(a,h.OPENING)},function(){r(a,h.OPENED)},a))},x.prototype.close=function(a){var d=this;d.state!==h.OPENING&&d.state!==h.CLOSING&&(d.settings.hashTracking&&d.$modal.attr("data-remodal-id")===location.hash.substr(1)&&(location.hash="",b(window).scrollTop(m)),s(function(){r(d,h.CLOSING,!1,a)},function(){d.$bg.removeClass(d.settings.modifier),d.$overlay.removeClass(d.settings.modifier).hide(),d.$wrapper.hide(),q(),r(d,h.CLOSED,!1,a)},d))},x.prototype.getState=function(){return this.state},x.prototype.destroy=function(){var d,a=b[c].lookup;t(this),this.$wrapper.remove(),delete a[this.index],d=b.grep(a,function(a){return!!a}).length,0===d&&(this.$overlay.remove(),this.$bg.removeClass(v("is",h.CLOSING)+" "+v("is",h.OPENING)+" "+v("is",h.CLOSED)+" "+v("is",h.OPENED)))},b[c]={lookup:[]},b.fn[c]=function(a){var d,e;return this.each(function(f,g){e=b(g),null==e.data(c)?(d=new x(e,a),e.data(c,d.index),d.settings.hashTracking&&e.attr("data-remodal-id")===location.hash.substr(1)&&d.open()):d=b[c].lookup[e.data(c)]}),d},b(document).ready(function(){b(document).on("click","[data-remodal-target]",function(a){a.preventDefault();var d=a.currentTarget,e=d.getAttribute("data-remodal-target"),f=b('[data-remodal-id="'+e+'"]');b[c].lookup[f.data(c)].open()}),b(document).find("."+d).each(function(a,d){var e=b(d),f=e.data("remodal-options");f?("string"==typeof f||f instanceof String)&&(f=u(f)):f={},e[c](f)}),b(document).on("keydown."+d,function(a){l&&l.settings.closeOnEscape&&l.state===h.OPENED&&27===a.keyCode&&l.close()}),b(window).on("hashchange."+d,w)})});